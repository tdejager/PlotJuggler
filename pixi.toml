[workspace]
preview = ["pixi-build"]
channels = [
  "https://prefix.dev/pixi-build-backends",
  "https://prefix.dev/conda-forge"
]
platforms = ["linux-64", "osx-arm64", "win-64"]

[workspace.target.win-64.build-variants]
# We need this to compile on windows correctly
# otherwise it uses a too old stdlib version
cxx_compiler = ["vs2022"]

# ROS2 is our default
[feature.jazzy]
channels = [
  "https://prefix.dev/robostack-jazzy",
]

[feature.jazzy.dependencies]
ros-jazzy-plotjuggler = { path = "./pixi_jazzy" }

# ROS1 build
[feature.noetic]
channels = [
  "https://prefix.dev/robostack-noetic",  # or robostack-humble, robostack-noetic, etc.
]

[feature.noetic.dependencies]
ros-noetic-plotjuggler = { path = "./pixi_noetic" }

# Environment for non-ROS build
[feature.non-ros.dependencies]
plotjuggler = { path = "./pixi_non_ros" }

# Task to start plotjuggler
[tasks]
start = "plotjuggler"

# Environments for both a ros and non-ros build
[environments]
default = ["jazzy"]
noetic = ["noetic"]
non-ros = ["non-ros"]
